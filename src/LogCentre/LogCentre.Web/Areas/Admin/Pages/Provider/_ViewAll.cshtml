@using LogCentre.Model

@model IEnumerable<ProviderModel>

<div class="table-responsive">
    <table class="table table-bordered table-striped table-hover" id="providerTable">
        <caption>List of Providers</caption>
        <thead>
            <tr>
                <th>
                    Id
                </th>
                <th>
                    Name
                </th>
                <th>
                    Description
                </th>
                <th>
                    Regex
                </th>
                <th class="d-none">
                    Active
                </th>
                <th class="d-none">
                    Deleted
                </th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Count() > 0)
            {
                @foreach (var provider in Model)
                {
                    <tr>
                        <td>
                            @provider.Id
                        </td>
                        <td>
                            @provider.Name
                        </td>
                        <td>
                            @provider.Description
                        </td>
                        <td>
                            @provider.Regex
                        </td>
                        <td class="d-none">
                            @provider.Active
                        </td>
                        <td class="d-none">
                            @provider.Deleted
                        </td>
                        <td class="text-right">
                            <a onclick="loadEditModal(@provider.Id)" class="btn btn-info text-white">Edit</a>
                            <form method="post" asp-page="Index" asp-route-id="@provider.Id" asp-page-handler="Delete" onsubmit="return jQueryModalDelete(this)" class="d-inline">
                                <button type="submit" class="btn btn-danger text-white">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function () {
        var table = $('#providerTable').DataTable({
            "order": [[1, 'asc']]
        });

        $('#providerTable tbody')
            .on('mouseenter', 'td', function () {
                var colIdx = table.cell(this).index();
                if (colIdx) {
                    var col = colIdx.column;
                    if (col) {
                        $(table.cells().nodes()).removeClass('highlight');
                        $(table.column(col).nodes()).addClass('highlight');
                    }
                }
            });
    });
</script>