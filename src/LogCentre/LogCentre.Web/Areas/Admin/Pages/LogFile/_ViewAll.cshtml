@using LogCentre.Model.Log

@model IEnumerable<FileModel>

<div class="table-responsive">
    <table class="table table-bordered table-striped table-hover" id="logFileTable">
        <caption>List of Log Files</caption>
        <thead>
            <tr>
                <th>
                    Id
                </th>
                <th>
                    Log Source
                </th>
                <th>
                    Name
                </th>
                <th>
                    Reading Complete
                </th>
                <th class="d-none">
                    Active
                </th>
                <th class="d-none">
                    Deleted
                </th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Count() > 0)
            {
                @foreach (var logFile in Model)
                {
                    <tr>
                        <td>
                            @logFile.Id
                        </td>
                        <td>
                            @logFile.LogSource.Name
                        </td>
                        <td>
                            @logFile.Name
                        </td>
                        <td>
                            @logFile.FileComplete
                        </td>
                        <td class="d-none">
                            @logFile.Active
                        </td>
                        <td class="d-none">
                            @logFile.Deleted
                        </td>
                        <td class="text-right">
                            @*<a onclick="jQueryModalGet('?handler=CreateOrEdit&id=@logFile.Id', 'Edit Log Source')" class="btn btn-info text-white">Edit</a>*@
                            <form method="post" asp-page="Index" asp-route-id="@logFile.Id" asp-page-handler="Delete" onsubmit="return jQueryModalDelete(this)" class="d-inline">
                                <button type="submit" class="btn btn-danger text-white">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function () {
        var table = $('#logFileTable').DataTable({
            "order": [[1, 'asc']]
        });

        $('#logFileTable tbody')
            .on('mouseenter', 'td', function () {
                var colIdx = table.cell(this).index();
                if (colIdx) {
                    var col = colIdx.column;
                    if (col) {
                        $(table.cells().nodes()).removeClass('highlight');
                        $(table.column(col).nodes()).addClass('highlight');
                    }
                }
            });
    });
</script>